
- hosts:
    - db
  vars_files:
    - vars.yml
  remote_user: root
  become: yes
  tasks:
    - name: install db server
      debug:
        msg: "install db server"

    - name: copy mongodb conf to yum repo
      copy:
        src: "{{ mongodb_repo }}"
        dest: /etc/yum.repos.d/

    - name: copy mysql conf to yum repo
      copy:
        src: "{{ mysql_repo }}"
        dest: /etc/yum.repos.d/

#    - name: install geerlingguy.mysql - mariadb
#      include_role:
#        name: geerlingguy.mysql
#      vars_files:
#          - vars.yml
#      when: enable_mysql
#
#    - name: install greendayonfire.mongodb
#      include_role:
#        name: greendayonfire.mongodb
#      vars_files:
#          - vars.yml
#      when: enable_mongodb

    - name: install DavidWittman.redis
      include_role:
        name: DavidWittman.redis
      vars_files:
          - vars.yml
      when: enable_redis

    - name: install wtanaka.apache-kafka
      include_role:
        name: wtanaka.apache-kafka
      vars_files:
          - vars.yml
      when: enable_kafka
